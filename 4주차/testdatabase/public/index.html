<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Welcome to Firebase Hosting</title>

    <script src="https://code.jquery.com/jquery-latest.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.8.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.8.1/firebase-database.js"></script>
    <script>
      // Your web app's Firebase configuration
      const firebaseConfig = {
        apiKey: "AIzaSyDqJ-kTYxBhQ68s1Ws7NgSI7qtI2PMU7oo",
        authDomain: "test-database93.firebaseapp.com",
        databaseURL: "https://test-database93-default-rtdb.firebaseio.com",
        projectId: "test-database93",
        storageBucket: "test-database93.appspot.com",
        messagingSenderId: "470493079992",
        appId: "1:470493079992:web:5111a4694e60608872474d"
      };

      // Initialize Firebase
      firebase.initializeApp(firebaseConfig);
      let database = firebase.database();



      $(document).ready(()=>{

        function joinCall(){
          let idvalue = $("#idvalue").val();
          let pwdvalue = $("#pwdvalue").val();
          $.ajax({
            url: "https://us-central1-test-database93.cloudfunctions.net/join", // 클라이언트가 요청을 보낼 서버의 URL 주소
            type: "POST",                             // HTTP 요청 방식(GET, POST)
            data : {id : idvalue, pwd : pwdvalue},
            dataType: "json"                         // 서버에서 보내줄 데이터의 타입
          })

          .done(function(json){
          });
        }

        function loginCall(){
          let idvalue = $("#idvalue").val();
          let pwdvalue = $("#pwdvalue").val();
          $.ajax({
            url: "https://us-central1-test-database93.cloudfunctions.net/login", // 클라이언트가 요청을 보낼 서버의 URL 주소
            type: "POST",                             // HTTP 요청 방식(GET, POST)
            data : {id : idvalue, pwd : pwdvalue},
            dataType: "json"                         // 서버에서 보내줄 데이터의 타입
          })

          .done(function(json){
            alert(json["result"]);
          });
        }


        $("#join").on("click",()=>{
          joinCall();
        });

        $("#login").on("click",()=>{
          loginCall();
        });
      });



    </script>


  </head>
  <body>
    <input type="text" id="idvalue" placeholder="아이디">
    <input type="text" id="pwdvalue" placeholder="패스워드">

    <button id="join">회원가입</button>
    <button id="login">로그인</button>

    <div id="chatlist">

    </div>
  </body>
</html>
